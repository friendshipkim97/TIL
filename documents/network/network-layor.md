# Network

### **IPv6 프로토콜**

기존의 32비트 주소 공간을 지원하는 IPv4는 최대 2^32개의 호스트를 수용할 수 있다. 호스트의 주소 공간을 대폭 확장한 **IPv6**는 주소를 표시하는 공간이 128비트로 확장되어 호스트를 최대 2^128개까지 지원할 수 있다. 또한, IPv6 헤더는 기존 IPv4와 다르게 불필요한 필드가 제외되거나 확장 헤더 형식으로 변경되었다. **이는 기존의 IP프로토콜에서 과도하게 수행하는 오류 제어와 같은 오버헤드를 줄여 프로토콜의 전송 효율을 높이기 위함이다.**


### **IP 터널링**

 - **IP 터널링이 중요해지게 된 이유?**
    
    현재 진행되는 인터넷 환경 변화와 관련해 가장 많이 연구되는 분야 중 하나는 이동하는 사용자가 서비스 중단 없이 인터넷에 접속할 수 있는 이동 환경 서비스를 수용하는 문제이다. 이동 호스트가 자신의 고유 주소를 유지하면서 인터넷 서비스를 받으려면 계속 이동하는 송수신 호스트 간의 데이터 라우팅 처리가 가장 중요하다. 이동 IP 프로토콜을 이해하기 위해 **터널링 원리**에 대해 알아본다.

 - **터널링 기능을 이용하기 전**

    터널링 기능을 이용하기 전에는, 예를 들어 홍길동이라는 사람이 육지 A 지점에서 출발해 섬에 있는 목적지 D에 도착하려면 중간에 있는 B와 C를 거쳐야 한다고 가정해보자. 홍길동이라는 사람이 출발지 A에서 목적지 D에 도착하는 동안 버스라는 IP 프로토콜에서 배라는 IP프로토콜로 갈아타야 한다. 즉, 홍길동 스스로 IP 프로토콜을 교체하는 작업이 추가로 이루어져야 한다.

 - **터널링 기능을 이용한 후** 

    터널링 기능을 이용한다면, 홍길동이 출발지에서 목적지까지 버스만 이용하므로, 네트워크 최종 사용자인 홍길동은 IP 프로토콜의 교체 과정에 개입하지 않을 수 있다. 중간에 있는 바다에서 버스 회사가 배를 직접 처리하여 버스가 배를 타는 형태의 터널 기능을 지원하기 때문이다. 즉, 홍길동은 출발지에서 버스를 타고, 도착지에서는 버스에서 내리기만 하면되는 것이다. **배라는 프로토콜을 홍길동은 전혀 이해할 필요가 없다.**


 - **이동 IP 프로토콜에서 터널링의 원리**
   
    먼저 이동 호스트의 위치가 바뀌면 새로운 위치를 관장하는 포린 에이전트 FAnew로부터 COA(Care of Address)를 얻는다. 이 주소는 이동 호스트의 홈 에이전트(HA)에 에 등록되어 FANew와 HA사이에 터널을 형성하는데 사용된다. HA로 라우팅된 패킷을 이동 호스트에 전달하려면 새로 형성된 터널을 통해 FANew로 전달해야 한다. 이동 호스트에는 고유 IP주소인 홈 주소 HA가 할당되고, 이 주소는 호스트 위치가 바뀌어도 변하지 않는다. 따라서 이동 호스트의 홈 주소는 홈 에이전트와 밀접한 관련을 갖는다. 여기서 이동 호스트는 네트워크에 있는 다른 호스트와 통신할 때 홈 주소를 사용한다. 여기서 홈 주소를 사용한다는 건, 구체적으로 이동 호스트는 IP프로토콜 헤더의 Source Address 필드에 표기된 주소를 자신의 홈 주소로 설정해 패킷을 전송한다. 패킷을 수신할 때는 반대로 Destination Address 필드에 자신의 홈 주소가 표기된 패킷이 전송되어 온다. COA는 이동 호스트가 위치를 변경할 때 새로 이동한 지역에서 일시적으로 할당된 IP주소이다. 따라서, 호스트가 이동할 때마다 새로운 COA가 할당되고 기존 COA는 회수되는 과정이 반복된다. 


### **ARP 프로토콜** 

**ARP(Address Resolution Protocol)은 주소 결정 프로토콜**이다. 네트워크 환경에서 임의의 호스트가 다른 호스트에 데이터를 전송하려면 수신 호스트의 IP 주소 뿐만 아니라 MAC주소도 알아야 한다. 송신 호스트의 MAC 주소는 자신의 LAN카드에 내장되므로 이 값을 읽으면 된다. 문제는 수신 호스트의 MAC주소이다. 수신 호스트의 IP주소를 매개변수로 하여 ARP프로토콜을 통해 수신 호스트의 MAC 주소를 얻어야 한다. IP주소로부터 MAC주소를 얻는 기능은 ARP를 통해 이루어진다.

### **RARP 프로토콜**

**RARP(Reverse Address Resolution Protocol)은 역순 주소 결정 프로토콜이다.** RARP는 ARP와 반대로 MAC주소를 이용해 IP주소를 제공한다. 파일시스템이 존재하지 않는 시스템이나 X윈도우 터미널 등에서는 자신의 LAN 카드 정보를 읽어 MAC 주소를 얻을 수 있지만, 파일 시스템이 없으므로 IP주소를 보관할 방법이 없다. 따라서, 이런 경우에 자신의 MAC 주소와 IP주소의 매핑 값을 보관하는 서버 호스트로부터 IP 주소를 얻어야 한다. 보통 네트워크에는 RARP의 기능을 전담으로 수행하는 서버가 하나 이상 존재한다. 따라서, 모든 호스트가 RARP 변환 요청을 받아도 해당 정보를 보관하고 있는 RARP 서버만 응답을 수행한다. 


### **ICMP 프로토콜**

**ICMP(Internet Control Message Protocol)은 인터넷 환경에서 오류에 관한 처리를 지원한다.** IP 프로토콜은 데이터 전송 과정에서 패킷 폐기 등의 오류가 발생해도 이를 보고하는 기능이 없는데, 이를 대체 지원하기 위해 네트워크 계층 프로토콜인 ICMP는 오류가 발생한 IP 패킷에 대하여 그 원인을 송신 호스트에 전달한다. TCP/IP 기반의 통신망에서 전송 과정에 문제가 발생하면 라우터에 의해 ICMP 메세지가 자동으로 발생한다.


### **IGMP 프로토콜**

**IGMP(Internet Group Management Protocol)은 임의의 호스트가 멀티캐스트 주소로 정의된 멀티캐스트 그룹에 가입하거나 탈퇴할 때 사용하는 프로토콜이다.** 멀티캐스트 라우팅에서는 다수의 호스트를 논리적인 하나의 단위로 관리하기 위해 그룹 관리 기능이 필요하기 때문이다.  